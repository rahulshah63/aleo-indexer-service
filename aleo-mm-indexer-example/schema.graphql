
# --- Base Types ---
scalar BigInt  # Represents u64 and u128 Aleo types
scalar DateTime # Represents timestamps
scalar JSON    # Represents complex Aleo records, arrays, or generic JSON data

type Query {
    transactions(
        limit: Int = 10,
        offset: Int = 0,
        programId: String,
        functionName: String
    ): [Transaction!]
    transaction(id: String!): Transaction
    market_reserves(limit: Int = 10, offset: Int = 0): [Market_reserves!]
    market_reserve(id: Int!): Market_reserves
}


# --- Base Schemas (Always Included) ---

type IndexerState {
    programName: String!
    lastIndexedBlock: Int!
    lastUpdated: DateTime!
}

type Transaction {
    id: String!
    programId: String!
    functionName: String!
    blockHeight: Int!
    timestamp: DateTime!
    raw: JSON # Store the raw transaction object
}

# --- Auto-Generated Schemas from indexer.config.ts ---

type Market_reserves {
  id: Int!
  transaction: Transaction!
  token_id_cipherd: String
  liquidity_cumulative_index_cipherd: String
  borrow_cumulative_index_cipherd: String
  base_LTV_as_collateral_cipherd: String
  liquidation_threshold_cipherd: String
  liquidation_bonus_cipherd: String
  decimals_cipherd: String
  optimal_utilization_rate_cipherd: String
  base_borrow_rate_cipherd: String
  is_freezed_cipherd: String
  is_active_cipherd: String
  borrow_threshold_cipherd: String
  user_address: String
  last_update_block_height: Int
  liquidity_rate: BigInt
  borrow_rate: BigInt
  liquidity_cumulative_index: BigInt
  borrow_cumulative_index: BigInt
  token_id: String
  decimals: Int
  base_LTV_as_collateral: BigInt
  liquidation_threshold: BigInt
  liquidation_bonus: BigInt
  optimal_utilization_rate: BigInt
  base_borrow_rate: BigInt
  borrow_threshold: BigInt
  is_freezed: Boolean
  is_active: Boolean
}

